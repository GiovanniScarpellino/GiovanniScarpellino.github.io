{"version":3,"file":"js/410.965a0910.js","mappings":"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","sources":["webpack://strapi-catalog-viewer/./src/views/CatalogDetail.vue","webpack://strapi-catalog-viewer/./src/views/CatalogDetail.vue?7aae"],"sourcesContent":["<template>\n  <div class=\"container mt-4\">\n    <div v-if=\"loading\" class=\"text-center\">\n      <div class=\"spinner-border\" role=\"status\">\n        <span class=\"visually-hidden\">Chargement...</span>\n      </div>\n    </div>\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n    <div v-if=\"catalog\">\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n        <h1>{{ catalog.title }}</h1>\n        <button class=\"btn btn-outline-primary\" @click=\"toggleNoteMode\">\n          {{ isNoteMode ? 'Quitter le mode Notes' : 'Activer le mode Notes' }}\n        </button>\n      </div>\n      <hr />\n      <h2>Pages</h2>\n      <div class=\"catalog-container\">\n        <div v-for=\"(pair, index) in pairedPages\" :key=\"index\" class=\"page-pair\">\n          <!-- Page de gauche -->\n          <div class=\"page left\" v-if=\"pair[0]\" @click=\"startNewNote($event, pair[0])\">\n            <div class=\"card-body\">\n              <img v-if=\"pair[0].active_image_version && pair[0].active_image_version.fichier_jpeg\"\n                   :src=\"getStrapiMediaUrl(pair[0].active_image_version.fichier_jpeg.url)\"\n                   alt=\"Version Image\"\n                   class=\"version-image\">\n              <div class=\"products-grid\">\n                <div v-for=\"product in pair[0].products\" :key=\"product.id\" class=\"product-item\">\n                  <img v-if=\"product.image\"\n                       :src=\"getStrapiMediaUrl(product.image.url)\"\n                       :alt=\"product.name\"\n                       class=\"product-image\">\n                  <strong>{{ product.name }}</strong>\n                  <span>${{ product.price }}</span>\n                  <p>{{ product.description }}</p>\n                </div>\n              </div>\n            </div>\n            <template v-if=\"isNoteMode\">\n              <div \n                v-for=\"note in pair[0].notes\" \n                :key=\"note.documentId\" \n                class=\"note-bubble\" \n                :class=\"{ 'is-dragging': draggedNote && draggedNote.note.documentId === note.documentId }\"\n                :style=\"{ top: note.y + '%', left: note.x + '%' }\"\n                @mousedown.stop=\"startDrag($event, note)\"\n              >\n                <button @click.stop=\"deleteNote(note)\" class=\"delete-note-btn\">×</button>\n                <a v-if=\"note.attachment\" :href=\"getStrapiMediaUrl(note.attachment.url)\" target=\"_blank\" class=\"me-2 paperclip-link\">\n                  <i class=\"bi bi-paperclip\"></i>\n                </a>\n                <strong v-if=\"note.user\">{{ note.user.username || note.user.email }}</strong>\n                <p>{{ note.content }}</p>\n              </div>\n              <div v-if=\"newNoteData && newNoteData.page === pair[0].id\" class=\"new-note-form\" :style=\"{ top: newNoteData.y + '%', left: newNoteData.x + '%' }\">\n                <textarea v-model=\"newNoteData.content\" placeholder=\"Votre note...\" class=\"form-control mb-2\"></textarea>\n                <input type=\"file\" @change=\"onFileSelected\" class=\"form-control-file mb-2\">\n                <button @click.stop=\"submitNewNote\" class=\"btn btn-sm btn-primary\">Enregistrer</button>\n                <button @click.stop=\"cancelNewNote\" class=\"btn btn-sm btn-secondary\">Annuler</button>\n              </div>\n            </template>\n            <div class=\"page-number\">{{ pair[0].page_number }}</div>\n          </div>\n          <div class=\"page-placeholder\" v-else></div>\n\n          <!-- Page de droite -->\n          <div class=\"page right\" v-if=\"pair[1]\" @click=\"startNewNote($event, pair[1])\">\n            <div class=\"card-body\">\n              <img v-if=\"pair[1].active_image_version && pair[1].active_image_version.fichier_jpeg\"\n                   :src=\"getStrapiMediaUrl(pair[1].active_image_version.fichier_jpeg.url)\"\n                   alt=\"Version Image\"\n                   class=\"version-image\">\n               <div class=\"products-grid\">\n                <div v-for=\"product in pair[1].products\" :key=\"product.id\" class=\"product-item\">\n                  <img v-if=\"product.image\"\n                       :src=\"getStrapiMediaUrl(product.image.url)\"\n                       :alt=\"product.name\"\n                       class=\"product-image\">\n                  <strong>{{ product.name }}</strong>\n                  <span>${{ product.price }}</span>\n                  <p>{{ product.description }}</p>\n                </div>\n              </div>\n            </div>\n            <template v-if=\"isNoteMode\">\n              <div \n                v-for=\"note in pair[1].notes\" \n                :key=\"note.documentId\" \n                class=\"note-bubble\" \n                :class=\"{ 'is-dragging': draggedNote && draggedNote.note.documentId === note.documentId }\"\n                :style=\"{ top: note.y + '%', left: note.x + '%' }\"\n                @mousedown.stop=\"startDrag($event, note)\"\n              >\n                <button @click.stop=\"deleteNote(note)\" class=\"delete-note-btn\">×</button>\n                <div class=\"note-content-wrapper\">\n                  <a v-if=\"note.attachment\" :href=\"getStrapiMediaUrl(note.attachment.url)\" target=\"_blank\" class=\"paperclip-link\">\n                    <i class=\"bi bi-paperclip\"></i>\n                  </a>\n                  <strong v-if=\"note.user\">{{ note.user.username || note.user.email }}</strong>\n                  <p>{{ note.content }}</p>\n                </div>\n              </div>\n              <div v-if=\"newNoteData && newNoteData.page === pair[1].id\" class=\"new-note-form\" :style=\"{ top: newNoteData.y + '%', left: newNoteData.x + '%' }\">\n                <textarea v-model=\"newNoteData.content\" placeholder=\"Votre note...\" class=\"form-control mb-2\"></textarea>\n                <input type=\"file\" @change=\"onFileSelected\" class=\"form-control-file mb-2\">\n                <button @click.stop=\"submitNewNote\" class=\"btn btn-sm btn-primary\">Enregistrer</button>\n                <button @click.stop=\"cancelNewNote\" class=\"btn btn-sm btn-secondary\">Annuler</button>\n              </div>\n            </template>\n            <div class=\"page-number\">{{ pair[1].page_number }}</div>\n          </div>\n          <div class=\"page-placeholder\" v-else></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport strapiApi from '@/services/strapiApi';\n\nexport default {\n  name: 'CatalogDetail',\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      catalog: null,\n      loading: true,\n      error: null,\n      strapiBaseUrl: process.env.VUE_APP_STRAPI_URL,\n      newNoteData: null,\n      isNoteMode: false,\n      notesLoaded: false,\n      draggedNote: null, // For drag and drop\n    };\n  },\n  computed: {\n    pairedPages() {\n      if (!this.catalog || !this.catalog.pages) {\n        return [];\n      }\n      const pages = [...this.catalog.pages].sort((a, b) => a.page_number - b.page_number);\n      const pairs = [];\n      if (pages.length > 0) {\n        pairs.push([null, pages[0]]);\n      }\n      for (let i = 1; i < pages.length; i += 2) {\n        if (i + 1 < pages.length) {\n          pairs.push([pages[i], pages[i + 1]]);\n        } else {\n          pairs.push([pages[i], null]);\n        }\n      }\n      return pairs;\n    },\n  },\n  async created() {\n    this.fetchInitialData();\n  },\n  methods: {\n    getStrapiMediaUrl(path) {\n      if (!path) return '';\n      return `${this.strapiBaseUrl}${path}`;\n    },\n    async fetchInitialData() {\n      this.loading = true;\n      try {\n        const response = await strapiApi.getCatalog(this.id);\n        this.catalog = response.data.data;\n      } catch (err) {\n        this.error = 'Erreur lors du chargement du catalogue.';\n        console.error(err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async toggleNoteMode() {\n      this.isNoteMode = !this.isNoteMode;\n      if (this.isNoteMode && !this.notesLoaded) {\n        await this.fetchNotes();\n      }\n    },\n    async fetchNotes() {\n      this.loading = true;\n      try {\n        const response = await strapiApi.getCatalogWithNotes(this.id);\n        this.catalog = response.data.data;\n        this.notesLoaded = true;\n      } catch (err) {\n        this.error = 'Erreur lors du chargement des notes.';\n        console.error(err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    startNewNote(event, page) {\n      if (!this.isNoteMode || !page) return;\n      if (this.newNoteData) return;\n\n      if (event.target.closest('.note-bubble') || event.target.closest('.new-note-form')) {\n          return;\n      }\n\n      const rect = event.currentTarget.getBoundingClientRect();\n      const x = ((event.clientX - rect.left) / rect.width) * 100;\n      const y = ((event.clientY - rect.top) / rect.height) * 100;\n\n      this.newNoteData = {\n        x: x,\n        y: y,\n        page: page.id,\n        content: '',\n        attachment: null,\n      };\n    },\n    onFileSelected(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.newNoteData.attachment = file;\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n      }\n    },\n    async submitNewNote() {\n      if (!this.newNoteData || !this.newNoteData.content) {\n        alert('Veuillez saisir un contenu pour la note.');\n        return;\n      }\n      try {\n        let attachmentId = null;\n        if (this.newNoteData.attachment) {\n          const response = await strapiApi.upload(this.newNoteData.attachment);\n          attachmentId = response.data[0].id;\n        }\n\n        const loggedInUser = JSON.parse(localStorage.getItem('user'));\n        const userId = loggedInUser ? loggedInUser.id : null;\n\n        const noteData = {\n          ...this.newNoteData,\n          attachment: attachmentId,\n          user: userId, // Associate the note with the logged-in user\n        };\n\n        await strapiApi.createNote(noteData);\n        await this.fetchNotes();\n        this.newNoteData = null;\n      } catch (err) {\n        console.error(\"Erreur lors de l'ajout de la note:\", err);\n        alert(\"Erreur lors de l'ajout de la note. Veuillez réessayer.\");\n      }\n    },\n    cancelNewNote() {\n      this.newNoteData = null;\n    },\n    async deleteNote(noteToDelete) {\n      if (confirm('Êtes-vous sûr de vouloir supprimer cette note ?')) {\n        try {\n          await strapiApi.deleteNote(noteToDelete.documentId);\n          await this.fetchNotes(); // Refresh notes\n        } catch (err) {\n          console.error('Erreur lors de la suppression de la note:', err);\n          alert('Erreur lors de la suppression de la note.');\n        }\n      }\n    },\n    startDrag(event, note) {\n      if (!this.isNoteMode) return;\n      const pageElement = event.target.closest('.page');\n      if (!pageElement) return;\n\n      const rect = pageElement.getBoundingClientRect();\n\n      this.draggedNote = {\n        note,\n        initialX: note.x,\n        initialY: note.y,\n        initialMouseX: event.clientX,\n        initialMouseY: event.clientY,\n        pageWidth: rect.width,\n        pageHeight: rect.height,\n      };\n\n      window.addEventListener('mousemove', this.handleDrag);\n      window.addEventListener('mouseup', this.stopDrag);\n    },\n\n    handleDrag(event) {\n      if (!this.draggedNote) return;\n      event.preventDefault();\n\n      const { note, initialX, initialY, initialMouseX, initialMouseY, pageWidth, pageHeight } = this.draggedNote;\n\n      const deltaX = event.clientX - initialMouseX;\n      const deltaY = event.clientY - initialMouseY;\n\n      const deltaX_percent = (deltaX / pageWidth) * 100;\n      const deltaY_percent = (deltaY / pageHeight) * 100;\n\n      note.x = initialX + deltaX_percent;\n      note.y = initialY + deltaY_percent;\n    },\n\n    async stopDrag() {\n      if (!this.draggedNote) return;\n      const { note, initialX, initialY } = this.draggedNote;\n      window.removeEventListener('mousemove', this.handleDrag);\n      window.removeEventListener('mouseup', this.stopDrag);\n\n      if (note.x !== initialX || note.y !== initialY) {\n        try {\n          await strapiApi.updateNote(note.documentId, { x: note.x, y: note.y });\n        } catch (err) {\n          console.error('Erreur lors de la mise à jour de la position de la note:', err);\n          alert('Impossible de sauvegarder la nouvelle position de la note.');\n          note.x = initialX;\n          note.y = initialY;\n        }\n      }\n      this.draggedNote = null;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.catalog-container {\n  width: 100%;\n  overflow-x: auto;\n  padding: 20px;\n  background-color: #f0f0f0;\n}\n.page-pair {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n  gap: 20px;\n}\n.page {\n  width: 30vw;\n  /* height: 42.42vw; */ /* RETIRÉ */\n  max-width: 600px;\n  /* max-height: 848px; */ /* RETIRÉ */\n  background-color: white;\n  border: 1px solid #ccc;\n  box-shadow: 0 0 10px rgba(0,0,0,0.1);\n  position: relative; /* Crucial pour positionner les enfants en absolu */\n  padding: 1vw;\n}\n\n@media (max-width: 1200px) {\n  .page-pair {\n    flex-direction: column;\n    align-items: center;\n  }\n  .page {\n    width: 70vw;\n    /* height: 98.98vw; */ /* RETIRÉ */\n  }\n}\n\n.page .card-body {\n  /* Plus de positionnement absolu, il suit le flux normal */\n}\n.page-placeholder {\n  width: 45%;\n}\n.left {\n  border-right: none;\n}\n.right {\n  border-left: none;\n}\n\n.note-bubble {\n  position: absolute;\n  background-color: #fff8b3; /* Light yellow, like a sticky note */\n  border: 1px solid #f0e080;\n  border-radius: 15px; /* More rounded */\n  padding: 10px;\n  box-shadow: 2px 2px 5px rgba(0,0,0,0.2);\n  max-width: 200px;\n  word-wrap: break-word;\n  z-index: 10;\n  cursor: grab;\n  transform: translate(-50%, -50%);\n}\n\n.note-bubble.is-dragging {\n  cursor: grabbing;\n  z-index: 11;\n}\n\n.delete-note-btn {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: #ff4d4d;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  line-height: 18px;\n  text-align: center;\n  font-size: 14px;\n  cursor: pointer;\n  opacity: 0.8;\n}\n\n.delete-note-btn:hover {\n  opacity: 1;\n}\n\n.note-bubble strong {\n  font-size: 0.9em;\n  display: block;\n  margin-bottom: 5px;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 3px;\n}\n\n.note-bubble p {\n  font-size: 0.9em;\n  margin: 0;\n  padding-top: 2px;\n  flex-grow: 1;\n}\n\n.note-content-wrapper {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n}\n\n.paperclip-link {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background-color: #e9ecef;\n  color: #495057;\n  transition: all 0.2s;\n  flex-shrink: 0;\n  text-decoration: none;\n}\n\n.paperclip-link:hover {\n  background-color: #007bff;\n  color: white;\n  transform: scale(1.1);\n}\n\n.new-note-form {\n  position: absolute;\n  background-color: white;\n  border: 1px solid #007bff;\n  border-radius: 5px;\n  padding: 15px;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.2);\n  z-index: 20; /* Make sure it appears above note-bubbles */\n  width: 250px;\n  transform: translate(-50%, -50%);\n}\n\n.page-number {\n  position: absolute;\n  bottom: 15px;\n  right: 20px;\n  font-size: 1.2em;\n  color: #aaa;\n  font-weight: bold;\n}\n\n.version-image {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.products-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-top: 15px; /* Espace entre l'image et la grille */\n}\n\n.product-item {\n  flex: 1 1 calc(50% - 15px);\n  border: 1px solid #eee;\n  padding: 10px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  background-color: #f9f9f9;\n}\n\n.product-image {\n  max-width: 100%;\n  height: auto;\n  margin-bottom: 10px;\n  border-radius: 3px;\n}\n\n.product-item strong {\n    font-size: 1em;\n    margin-bottom: 5px;\n}\n.product-item span {\n    font-size: 0.9em;\n    color: #555;\n    margin-bottom: 10px;\n}\n.product-item p {\n    font-size: 0.8em;\n}\n</style>","import { render } from \"./CatalogDetail.vue?vue&type=template&id=6e8cc13f&scoped=true\"\nimport script from \"./CatalogDetail.vue?vue&type=script&lang=js\"\nexport * from \"./CatalogDetail.vue?vue&type=script&lang=js\"\n\nimport \"./CatalogDetail.vue?vue&type=style&index=0&id=6e8cc13f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6e8cc13f\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_cache","_createElementVNode","role","error","_hoisted_3","_toDisplayString","catalog","_hoisted_4","_hoisted_5","title","onClick","args","$options","toggleNoteMode","isNoteMode","_hoisted_6","_Fragment","_renderList","pairedPages","pair","index","key","$event","startNewNote","_hoisted_8","active_image_version","fichier_jpeg","src","getStrapiMediaUrl","url","alt","_hoisted_10","products","product","id","image","name","price","description","notes","note","documentId","_normalizeClass","draggedNote","style","_normalizeStyle","top","y","left","x","onMousedown","_withModifiers","startDrag","deleteNote","_hoisted_13","attachment","href","target","user","_hoisted_15","username","email","content","newNoteData","page","placeholder","type","onChange","onFileSelected","submitNewNote","cancelNewNote","_hoisted_16","page_number","_hoisted_17","_hoisted_19","_hoisted_21","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_29","props","String","required","data","strapiBaseUrl","process","notesLoaded","computed","this","pages","sort","a","b","pairs","length","push","i","created","fetchInitialData","methods","path","response","strapiApi","getCatalog","err","console","fetchNotes","getCatalogWithNotes","event","closest","rect","currentTarget","getBoundingClientRect","clientX","width","clientY","height","file","files","reader","FileReader","readAsDataURL","attachmentId","upload","loggedInUser","JSON","parse","localStorage","getItem","userId","noteData","createNote","alert","noteToDelete","confirm","pageElement","initialX","initialY","initialMouseX","initialMouseY","pageWidth","pageHeight","window","addEventListener","handleDrag","stopDrag","preventDefault","deltaX","deltaY","deltaX_percent","deltaY_percent","removeEventListener","updateNote","__exports__","render"],"sourceRoot":""}