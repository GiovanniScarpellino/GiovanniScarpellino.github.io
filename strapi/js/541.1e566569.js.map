{"version":3,"file":"js/541.1e566569.js","mappings":"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","sources":["webpack://strapi-catalog-viewer/./src/views/CatalogDetail.vue","webpack://strapi-catalog-viewer/./src/views/CatalogDetail.vue?7aae"],"sourcesContent":["<template>\n  <div class=\"container mt-4\">\n    <div v-if=\"loading\" class=\"text-center\">\n      <div class=\"spinner-border\" role=\"status\">\n        <span class=\"visually-hidden\">Chargement...</span>\n      </div>\n    </div>\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n    <div v-if=\"catalog\">\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n        <h1>{{ catalog.title }}</h1>\n        <button class=\"btn btn-outline-primary\" @click=\"toggleNoteMode\">\n          {{ isNoteMode ? 'Quitter le mode Notes' : 'Activer le mode Notes' }}\n        </button>\n      </div>\n      <p>\n        <a :href=\"getStrapiMediaUrl(catalog.pdf_file_path)\" target=\"_blank\">Voir le PDF</a> |\n        <a :href=\"getStrapiMediaUrl(catalog.jpeg_preview_path)\" target=\"_blank\">Voir l'aperçu</a>\n      </p>\n      <hr />\n      <h2>Pages</h2>\n      <div class=\"catalog-container\">\n        <div v-for=\"(pair, index) in pairedPages\" :key=\"index\" class=\"page-pair\">\n          <!-- Page de gauche -->\n          <div class=\"page left\" v-if=\"pair[0]\" @click=\"startNewNote($event, pair[0])\">\n            <div class=\"card-body\">\n              <div class=\"products-grid\">\n                <div v-for=\"product in pair[0].products\" :key=\"product.id\" class=\"product-item\">\n                  <img v-if=\"product.image\"\n                       :src=\"getStrapiMediaUrl(product.image.url)\"\n                       :alt=\"product.name\"\n                       class=\"product-image\">\n                  <strong>{{ product.name }}</strong>\n                  <span>${{ product.price }}</span>\n                  <p>{{ product.description }}</p>\n                </div>\n              </div>\n            </div>\n            <template v-if=\"isNoteMode\">\n              <div \n                v-for=\"note in pair[0].notes\" \n                :key=\"note.documentId\" \n                class=\"note-bubble\" \n                :class=\"{ 'is-dragging': draggedNote && draggedNote.note.documentId === note.documentId }\"\n                :style=\"{ top: note.y + 'px', left: note.x + 'px' }\"\n                @mousedown.stop=\"startDrag($event, note)\"\n              >\n                <button @click.stop=\"deleteNote(note)\" class=\"delete-note-btn\">×</button>\n                <strong>{{ note.title }}</strong>\n                <p>{{ note.content }}</p>\n              </div>\n              <div v-if=\"newNoteData && newNoteData.page === pair[0].id\" class=\"new-note-form\" :style=\"{ top: newNoteData.y + 'px', left: newNoteData.x + 'px' }\">\n                <input type=\"text\" v-model=\"newNoteData.title\" placeholder=\"Titre\" class=\"form-control mb-2\">\n                <textarea v-model=\"newNoteData.content\" placeholder=\"Votre note...\" class=\"form-control mb-2\"></textarea>\n                <button @click.stop=\"submitNewNote\" class=\"btn btn-sm btn-primary\">Enregistrer</button>\n                <button @click.stop=\"cancelNewNote\" class=\"btn btn-sm btn-secondary\">Annuler</button>\n              </div>\n            </template>\n            <div class=\"page-number\">{{ pair[0].page_number }}</div>\n          </div>\n          <div class=\"page-placeholder\" v-else></div>\n\n          <!-- Page de droite -->\n          <div class=\"page right\" v-if=\"pair[1]\" @click=\"startNewNote($event, pair[1])\">\n            <div class=\"card-body\">\n               <div class=\"products-grid\">\n                <div v-for=\"product in pair[1].products\" :key=\"product.id\" class=\"product-item\">\n                  <img v-if=\"product.image\"\n                       :src=\"getStrapiMediaUrl(product.image.url)\"\n                       :alt=\"product.name\"\n                       class=\"product-image\">\n                  <strong>{{ product.name }}</strong>\n                  <span>${{ product.price }}</span>\n                  <p>{{ product.description }}</p>\n                </div>\n              </div>\n            </div>\n            <template v-if=\"isNoteMode\">\n              <div \n                v-for=\"note in pair[1].notes\" \n                :key=\"note.documentId\" \n                class=\"note-bubble\" \n                :class=\"{ 'is-dragging': draggedNote && draggedNote.note.documentId === note.documentId }\"\n                :style=\"{ top: note.y + 'px', left: note.x + 'px' }\"\n                @mousedown.stop=\"startDrag($event, note)\"\n              >\n                <button @click.stop=\"deleteNote(note)\" class=\"delete-note-btn\">×</button>\n                <strong>{{ note.title }}</strong>\n                <p>{{ note.content }}</p>\n              </div>\n              <div v-if=\"newNoteData && newNoteData.page === pair[1].id\" class=\"new-note-form\" :style=\"{ top: newNoteData.y + 'px', left: newNoteData.x + 'px' }\">\n                <input type=\"text\" v-model=\"newNoteData.title\" placeholder=\"Titre\" class=\"form-control mb-2\">\n                <textarea v-model=\"newNoteData.content\" placeholder=\"Votre note...\" class=\"form-control mb-2\"></textarea>\n                <button @click.stop=\"submitNewNote\" class=\"btn btn-sm btn-primary\">Enregistrer</button>\n                <button @click.stop=\"cancelNewNote\" class=\"btn btn-sm btn-secondary\">Annuler</button>\n              </div>\n            </template>\n            <div class=\"page-number\">{{ pair[1].page_number }}</div>\n          </div>\n          <div class=\"page-placeholder\" v-else></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport strapiApi from '@/services/strapiApi';\n\nexport default {\n  name: 'CatalogDetail',\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      catalog: null,\n      loading: true,\n      error: null,\n      strapiBaseUrl: process.env.VUE_APP_STRAPI_URL,\n      newNoteData: null,\n      isNoteMode: false,\n      notesLoaded: false,\n      draggedNote: null, // For drag and drop\n    };\n  },\n  computed: {\n    pairedPages() {\n      if (!this.catalog || !this.catalog.pages) {\n        return [];\n      }\n      const pages = [...this.catalog.pages].sort((a, b) => a.page_number - b.page_number);\n      const pairs = [];\n      if (pages.length > 0) {\n        pairs.push([null, pages[0]]);\n      }\n      for (let i = 1; i < pages.length; i += 2) {\n        if (i + 1 < pages.length) {\n          pairs.push([pages[i], pages[i + 1]]);\n        } else {\n          pairs.push([pages[i], null]);\n        }\n      }\n      return pairs;\n    },\n  },\n  async created() {\n    this.fetchInitialData();\n  },\n  methods: {\n    getStrapiMediaUrl(path) {\n      if (!path) return '';\n      return `${this.strapiBaseUrl}${path}`;\n    },\n    async fetchInitialData() {\n      this.loading = true;\n      try {\n        const response = await strapiApi.getCatalog(this.id);\n        this.catalog = response.data.data;\n      } catch (err) {\n        this.error = 'Erreur lors du chargement du catalogue.';\n        console.error(err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async toggleNoteMode() {\n      this.isNoteMode = !this.isNoteMode;\n      if (this.isNoteMode && !this.notesLoaded) {\n        await this.fetchNotes();\n      }\n    },\n    async fetchNotes() {\n      this.loading = true;\n      try {\n        const response = await strapiApi.getCatalogWithNotes(this.id);\n        this.catalog = response.data.data;\n        this.notesLoaded = true;\n      } catch (err) {\n        this.error = 'Erreur lors du chargement des notes.';\n        console.error(err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    startNewNote(event, page) {\n      if (!this.isNoteMode || !page) return;\n      if (this.newNoteData) return;\n\n      if (event.target.closest('.note-bubble') || event.target.closest('.new-note-form')) {\n          return;\n      }\n\n      const rect = event.currentTarget.getBoundingClientRect();\n      this.newNoteData = {\n        x: Math.round(event.clientX - rect.left),\n        y: Math.round(event.clientY - rect.top),\n        page: page.id,\n        title: '',\n        content: '',\n      };\n    },\n    async submitNewNote() {\n      if (!this.newNoteData || !this.newNoteData.content) {\n        alert('Veuillez saisir un contenu pour la note.');\n        return;\n      }\n      try {\n        await strapiApi.createNote(this.newNoteData);\n        await this.fetchNotes();\n        this.newNoteData = null;\n      } catch (err) {\n        console.error(\"Erreur lors de l'ajout de la note:\", err);\n        alert(\"Erreur lors de l'ajout de la note. Veuillez réessayer.\");\n      }\n    },\n    cancelNewNote() {\n      this.newNoteData = null;\n    },\n    async deleteNote(noteToDelete) {\n      if (confirm('Êtes-vous sûr de vouloir supprimer cette note ?')) {\n        try {\n          await strapiApi.deleteNote(noteToDelete.documentId);\n          await this.fetchNotes(); // Refresh notes\n        } catch (err) {\n          console.error('Erreur lors de la suppression de la note:', err);\n          alert('Erreur lors de la suppression de la note.');\n        }\n      }\n    },\n    startDrag(event, note) {\n      if (!this.isNoteMode) return;\n      this.draggedNote = {\n        note,\n        initialX: note.x,\n        initialY: note.y,\n        offsetX: event.clientX - note.x,\n        offsetY: event.clientY - note.y,\n      };\n      window.addEventListener('mousemove', this.handleDrag);\n      window.addEventListener('mouseup', this.stopDrag);\n    },\n    handleDrag(event) {\n      if (!this.draggedNote) return;\n      event.preventDefault();\n      const { note, offsetX, offsetY } = this.draggedNote;\n      note.x = event.clientX - offsetX;\n      note.y = event.clientY - offsetY;\n    },\n    async stopDrag() {\n      if (!this.draggedNote) return;\n      const { note, initialX, initialY } = this.draggedNote;\n      window.removeEventListener('mousemove', this.handleDrag);\n      window.removeEventListener('mouseup', this.stopDrag);\n\n      if (note.x !== initialX || note.y !== initialY) {\n        try {\n          await strapiApi.updateNote(note.documentId, { x: note.x, y: note.y });\n        } catch (err) {\n          console.error('Erreur lors de la mise à jour de la position de la note:', err);\n          alert('Impossible de sauvegarder la nouvelle position de la note.');\n          note.x = initialX;\n          note.y = initialY;\n        }\n      }\n      this.draggedNote = null;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.catalog-container {\n  width: 100%;\n  overflow-x: auto;\n  padding: 20px;\n  background-color: #f0f0f0;\n}\n.page-pair {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n  gap: 20px;\n}\n.page {\n  width: 45%;\n  min-height: 800px; /* Increased height */\n  background-color: white;\n  border: 1px solid #ccc;\n  box-shadow: 0 0 10px rgba(0,0,0,0.1);\n  position: relative; /* This is crucial for positioning notes */\n  padding: 20px;\n}\n.page .card-body {\n  height: 100%;\n}\n.page-placeholder {\n  width: 45%;\n}\n.left {\n  border-right: none;\n}\n.right {\n  border-left: none;\n}\n\n.note-bubble {\n  position: absolute;\n  background-color: #fff8b3; /* Light yellow, like a sticky note */\n  border: 1px solid #f0e080;\n  border-radius: 15px; /* More rounded */\n  padding: 10px;\n  box-shadow: 2px 2px 5px rgba(0,0,0,0.2);\n  max-width: 200px;\n  word-wrap: break-word;\n  z-index: 10;\n  cursor: grab;\n}\n\n.note-bubble.is-dragging {\n  cursor: grabbing;\n  z-index: 11;\n}\n\n.delete-note-btn {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: #ff4d4d;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  line-height: 18px;\n  text-align: center;\n  font-size: 14px;\n  cursor: pointer;\n  opacity: 0.8;\n}\n\n.delete-note-btn:hover {\n  opacity: 1;\n}\n\n.note-bubble strong {\n  font-size: 0.9em;\n  display: block;\n  margin-bottom: 5px;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 3px;\n}\n\n.note-bubble p {\n  font-size: 0.8em;\n  margin: 0;\n}\n\n.new-note-form {\n  position: absolute;\n  background-color: white;\n  border: 1px solid #007bff;\n  border-radius: 5px;\n  padding: 15px;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.2);\n  z-index: 20; /* Make sure it appears above note-bubbles */\n  width: 250px;\n}\n\n.page-number {\n  position: absolute;\n  bottom: 15px;\n  right: 20px;\n  font-size: 1.2em;\n  color: #aaa;\n  font-weight: bold;\n}\n\n.products-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  height: 100%;\n}\n\n.product-item {\n  flex: 1 1 calc(50% - 15px);\n  border: 1px solid #eee;\n  padding: 10px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  background-color: #f9f9f9;\n}\n\n.product-image {\n  max-width: 100%;\n  height: auto;\n  margin-bottom: 10px;\n  border-radius: 3px;\n}\n\n.product-item strong {\n    font-size: 1em;\n    margin-bottom: 5px;\n}\n.product-item span {\n    font-size: 0.9em;\n    color: #555;\n    margin-bottom: 10px;\n}\n.product-item p {\n    font-size: 0.8em;\n}\n</style>","import { render } from \"./CatalogDetail.vue?vue&type=template&id=e680b064&scoped=true\"\nimport script from \"./CatalogDetail.vue?vue&type=script&lang=js\"\nexport * from \"./CatalogDetail.vue?vue&type=script&lang=js\"\n\nimport \"./CatalogDetail.vue?vue&type=style&index=0&id=e680b064&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e680b064\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_cache","_createElementVNode","role","error","_hoisted_3","_toDisplayString","catalog","_hoisted_4","_hoisted_5","title","onClick","args","$options","toggleNoteMode","isNoteMode","href","getStrapiMediaUrl","pdf_file_path","target","_hoisted_6","jpeg_preview_path","_hoisted_7","_hoisted_8","_Fragment","_renderList","pairedPages","pair","index","key","$event","startNewNote","_hoisted_10","_hoisted_11","products","product","id","image","src","url","alt","name","price","description","notes","note","documentId","_normalizeClass","draggedNote","style","_normalizeStyle","top","y","left","x","onMousedown","_withModifiers","startDrag","deleteNote","_hoisted_14","content","newNoteData","page","type","placeholder","submitNewNote","cancelNewNote","_hoisted_15","page_number","_hoisted_16","_hoisted_18","_hoisted_19","_hoisted_22","_hoisted_23","_hoisted_24","props","String","required","data","strapiBaseUrl","process","notesLoaded","computed","this","pages","sort","a","b","pairs","length","push","i","created","fetchInitialData","methods","path","response","strapiApi","getCatalog","err","console","fetchNotes","getCatalogWithNotes","event","closest","rect","currentTarget","getBoundingClientRect","Math","round","clientX","clientY","createNote","alert","noteToDelete","confirm","initialX","initialY","offsetX","offsetY","window","addEventListener","handleDrag","stopDrag","preventDefault","removeEventListener","updateNote","__exports__","render"],"sourceRoot":""}